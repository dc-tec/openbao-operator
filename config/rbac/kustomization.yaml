resources:
  # ServiceAccounts: Separate ServiceAccounts for least-privilege model
  # - openbao-operator-controller: Used by the OpenBaoCluster controller (no cluster-wide permissions)
  - openbaocluster_service_account.yaml
  # - openbao-operator-provisioner: Used by Provisioner controller (minimal cluster-wide permissions)
  - provisioner_service_account.yaml

  # Provisioner RBAC: Minimal permissions for namespace watching and RBAC management
  # Note: provisioner_minimal_role.yaml is the active role (with labels and proper structure).
  - provisioner_minimal_role.yaml
  - provisioner_role_binding.yaml
  # Provisioner Impersonation Pattern: Delegate ServiceAccount and Template Role
  # These resources enable the Provisioner to use impersonation, reducing privilege escalation risk
  - provisioner_delegate_clusterrole.yaml
  - provisioner_delegate_serviceaccount.yaml
  - provisioner_delegate_clusterrolebinding.yaml
  - leader_election_role.yaml
  - provisioner_leader_election_role_binding.yaml
  # Controller RBAC: OpenBaoCluster watch, leader election, and metrics
  - controller_openbaocluster_clusterrole.yaml
  - controller_openbaocluster_clusterrolebinding.yaml
  # Controller RBAC: OpenBaoRestore watch
  - controller_openbaorestore_clusterrole.yaml
  - controller_openbaorestore_clusterrolebinding.yaml
  - leader_election_role_binding.yaml
  # The following RBAC configurations are used to protect
  # the metrics endpoint with authn/authz. These configurations
  # ensure that only authorized users and service accounts
  # can access the metrics endpoint. Comment the following
  # permissions if you want to disable this protection.
  # More info: https://book.kubebuilder.io/reference/metrics.html
  - metrics_auth_role.yaml
  - provisioner_metrics_auth_role_binding.yaml
  - metrics_auth_role_binding.yaml
  - metrics_reader_role.yaml
  # For each CRD, "Admin", "Editor" and "Viewer" roles are scaffolded by
  # default, aiding admins in cluster management. Those roles are
  # not used by the openbao-operator itself. You can comment the following lines
  # if you do not want those helpers be installed with your Project.
  - openbaocluster_admin_role.yaml
  - openbaocluster_editor_role.yaml
  - openbaocluster_viewer_role.yaml
